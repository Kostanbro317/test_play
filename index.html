
<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>–ú—ñ–Ω—ñ–≥—Ä–∞</title>
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>

<div class="casino">
	<div id="balance"></div>
	<div id="result">–ù–∞–∂–º—ñ—Ç—å –≥—Ä–∞—Ç–∏</div>
	<button id="playBtn">–ì—Ä–∞—Ç–∏</button>
	<button id="plusCircle"></button>
</div>
<button id="resetBtn">–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏</button>
<script>
/* ===== –ë–ê–õ–ê–ù–° ===== */
let balance = Number(localStorage.getItem("balance"));
if (isNaN(balance)) {
	balance = 100;
	localStorage.setItem("balance", balance);
}

const balanceEl = document.getElementById("balance");
const resultEl = document.getElementById("result");

function updateBalance() {
	balanceEl.textContent = "üí∞ –ë–∞–ª–∞–Ω—Å: " + balance;
}
updateBalance();

/* ===== –û–°–ù–û–í–ù–ê –ì–†–ê ===== */
const GAME_COST = 10;
const WIN_CHANCE = 0.1;
const WIN_REWARD = 100;

document.getElementById("playBtn").onclick = () => {
	if (balance < GAME_COST) {
		resultEl.textContent = "–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤!";
		return;
	}

	balance -= GAME_COST;

	if (Math.random() < WIN_CHANCE) {
		balance += WIN_REWARD;
		resultEl.textContent = "WIN!!!";
	} else {
		resultEl.textContent = "LOSE!!!";
	}

	localStorage.setItem("balance", balance);
	updateBalance();
};

/* ===== –ö–£–õ–Ü ===== */
const circles = [];

function createCircle() {
	const el = document.createElement("div");
	el.className = "circle";
	document.body.appendChild(el);

	const c = {
		el,
		x: Math.random() * (window.innerWidth - 40),
		y: Math.random() * (window.innerHeight - 40),
		dx: (Math.random() * 2 + 1) * (Math.random() < 0.5 ? -1 : 1),
		dy: (Math.random() * 2 + 1) * (Math.random() < 0.5 ? -1 : 1),
		active: true
	};

	el.style.left = c.x + "px";
	el.style.top = c.y + "px";

	el.addEventListener("click", (e) => hitCircle(e, c));
	el.addEventListener("touchstart", (e) => hitCircle(e, c));

	circles.push(c);
}

function moveCircles() {
	circles.forEach(c => {
		if (!c.active) return;

		c.x += c.dx;
		c.y += c.dy;

		if (c.x <= 0 || c.x >= window.innerWidth - 40) c.dx *= -1;
		if (c.y <= 0 || c.y >= window.innerHeight - 40) c.dy *= -1;

		c.el.style.left = c.x + "px";
		c.el.style.top = c.y + "px";
	});
}
setInterval(moveCircles, 16);

/* ===== –ö–õ–Ü–ö –ü–û –ö–£–õ–Ü ===== */
function hitCircle(e, c) {
	if (!c.active) return;
	e.preventDefault();

	c.active = false;
	c.el.style.display = "none";

	balance += 10;
	localStorage.setItem("balance", balance);
	updateBalance();
	resultEl.textContent = "+10!";

	setTimeout(() => {
		c.x = Math.random() * (window.innerWidth - 40);
		c.y = Math.random() * (window.innerHeight - 40);
		c.el.style.display = "block";
		c.active = true;
	}, 5000);
}

/* ===== –¶–Ü–ù–ê –¢–ê –ö–Ü–õ–¨–ö–Ü–°–¢–¨ –ö–£–õ–¨ ===== */
let circlePrice = Number(localStorage.getItem("circlePrice")) || 50;
let circleCount = Number(localStorage.getItem("circleCount")) || 1;

const plusCircleBtn = document.getElementById("plusCircle");

function updateCircleButton() {
	plusCircleBtn.textContent = `–ö—É–ø–∏—Ç–∏ (${circlePrice}) | –ö—É–ª—å: ${circleCount}`;
}
updateCircleButton();

/* ===== –ö–£–ü–ò–¢–ò –ö–£–õ–Æ ===== */
plusCircleBtn.onclick = () => {
	if (balance < circlePrice) {
		resultEl.textContent = "–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤!";
		return;
	}

	balance -= circlePrice;
	circlePrice += 50;
	circleCount++;

	localStorage.setItem("balance", balance);
	localStorage.setItem("circlePrice", circlePrice);
	localStorage.setItem("circleCount", circleCount);

	updateBalance();
	updateCircleButton();
	createCircle();
};

/* ===== –í–Ü–î–ù–û–í–õ–ï–ù–ù–Ø –ö–£–õ–¨ ===== */
for (let i = 0; i < circleCount; i++) {
	createCircle();
}
document.getElementById("resetBtn").onclick = () => {
	localStorage.clear();
	location.reload();
};

</script>

</body>
</html>
